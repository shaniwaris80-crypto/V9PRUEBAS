/* ===========================================================
   ARSLAN PRO V10.4 — KIWI FULL Firebase Edition
   • Paletas: Kiwi, Graphite, Sand, Mint
   • Diseño limpio, responsive, imprimible
   • PDF optimizado (html2pdf)
=========================================================== */

:root{
  --green:#20a357;
  --green-600:#15803d;
  --green-100:#e8f7ee;
  --gray-900:#1d2939;
  --gray-500:#667085;
  --gray-200:#e4e7ec;
  --bg:#ffffff;
  --danger:#dc2626;
  --amber:#f59e0b;
  --info:#2563eb;
  --radius:14px;
  --shadow:0 2px 6px rgba(0,0,0,0.08);
  --font:"Poppins",sans-serif;
  font-family:var(--font);
  color:var(--gray-900);
  background:var(--bg);
}

/* ---------- Reset básico ---------- */
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;scroll-behavior:smooth;}
body{display:flex;flex-direction:column;}
img{max-width:100%;}

/* ---------- Barra superior ---------- */
.topbar{
  display:flex;align-items:center;justify-content:space-between;
  padding:8px 14px;background:var(--green);color:white;
  box-shadow:0 2px 4px rgba(0,0,0,0.1);
}
.topbar .brand{display:flex;align-items:center;gap:8px;font-weight:600;}
.topbar img{width:36px;height:36px;}
.topbar small{font-size:12px;opacity:.8;}

.tabs{display:flex;flex-wrap:wrap;gap:4px;}
.tabs .tab{
  background:rgba(255,255,255,0.1);border:none;color:white;
  padding:6px 10px;border-radius:var(--radius);cursor:pointer;
  font-weight:500;transition:.2s;
}
.tabs .tab.active,.tabs .tab:hover{background:white;color:var(--green);}

/* ---------- Contenedor principal ---------- */
.container{flex:1;overflow:auto;padding:16px;max-width:1500px;margin:0 auto;}
.panel{display:none;animation:fade .3s;}
.panel.active{display:block;}
@keyframes fade{from{opacity:0}to{opacity:1}}

.card{
  background:white;border:1px solid var(--gray-200);
  border-radius:var(--radius);padding:14px;margin-bottom:14px;
  box-shadow:var(--shadow);
}
.card h3{margin-bottom:8px;font-size:18px;color:var(--green-600);}
.title-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;flex-wrap:wrap;}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap;}
.mt8{margin-top:8px;}

/* ---------- Botones ---------- */
button{
  background:var(--green);color:white;border:none;
  border-radius:var(--radius);padding:6px 12px;
  cursor:pointer;font-weight:500;transition:.2s;
}
button:hover{background:var(--green-600);}
button.ghost{
  background:transparent;color:var(--gray-900);border:1px solid var(--gray-200);
}
button.ghost:hover{border-color:var(--green);color:var(--green);}
button.big{font-size:18px;padding:10px 16px;}
button:disabled{opacity:.4;cursor:not-allowed;}

/* ---------- Inputs ---------- */
input,select,textarea{
  width:100%;padding:6px 8px;border:1px solid var(--gray-200);
  border-radius:var(--radius);font-family:inherit;font-size:14px;
}
textarea{resize:vertical;}
input:focus,select:focus,textarea:focus{
  outline:none;border-color:var(--green);
  box-shadow:0 0 0 2px rgba(31,157,85,0.2);
}
.search{max-width:220px;}
label{display:block;margin-top:6px;font-size:14px;}
label.check{display:flex;align-items:center;gap:6px;font-weight:500;}

/* ---------- Grids ---------- */
.grid2{display:grid;grid-template-columns:repeat(auto-fit,minmax(360px,1fr));gap:12px;}
.grid3{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:12px;}

/* ---------- Tablas ---------- */
.table-wrap{overflow:auto;max-height:400px;}
.calc-table{width:100%;border-collapse:collapse;font-size:13.5px;}
.calc-table th,.calc-table td{padding:6px;border-bottom:1px solid var(--gray-200);text-align:center;}
.calc-table th{background:var(--green-100);position:sticky;top:0;}
.calc-table tr:nth-child(even){background:#fafafa;}
.calc-table td input,.calc-table td select{width:100%;}

/* ---------- Totales ---------- */
.totals-grid{
  display:grid;grid-template-columns:1fr auto;gap:4px;font-size:14px;
}
.totals-grid .big{font-weight:600;font-size:16px;color:var(--green-600);}
.pendiente{margin-top:8px;font-weight:500;}
.pendiente strong{color:var(--danger);}
.pendiente.total strong{color:var(--green-600);}

/* ---------- Listas ---------- */
.list{display:flex;flex-direction:column;gap:6px;max-height:600px;overflow:auto;}
.list.small{max-height:200px;}
.item{
  display:flex;justify-content:space-between;align-items:center;
  background:#f9fafb;padding:6px 8px;border-radius:var(--radius);
  border:1px solid var(--gray-200);
}
.item .muted{color:var(--gray-500);font-size:12px;}
.product-row{display:grid;grid-template-columns:2fr .8fr .8fr .8fr 1fr auto auto;gap:4px;align-items:center;margin-bottom:6px;}
.product-row input,.product-row select{padding:4px 6px;font-size:13px;}
.product-row button{padding:4px 8px;}

/* ---------- Estados ---------- */
.state-badge{
  padding:2px 6px;border-radius:8px;font-size:12px;font-weight:500;color:white;
}
.state-red{background:var(--danger);}
.state-green{background:var(--green);}
.state-amber{background:var(--amber);}
.state-blue{background:var(--info);}

/* ---------- KPIs ---------- */
.kpis{display:flex;gap:16px;flex-wrap:wrap;}
.kpi{background:var(--green-100);border-radius:var(--radius);padding:10px;flex:1;min-width:120px;text-align:center;}
.kpi strong{display:block;font-size:16px;margin-top:4px;color:var(--green-600);}

/* ---------- Gráficas ---------- */
canvas{width:100%!important;}

/* ---------- PDF ---------- */
.print{
  display:none;background:white;color:black;
  padding:16px;font-size:13px;line-height:1.4;
}
.pdf-header{display:flex;justify-content:space-between;align-items:flex-start;border-bottom:2px solid var(--green);padding-bottom:8px;margin-bottom:8px;}
.pdf-brand{display:flex;align-items:flex-start;gap:8px;}
.pdf-brand img{width:48px;height:48px;}
.pdf-meta{font-size:13px;text-align:right;}
.pdf-totales{display:flex;justify-content:space-between;margin-top:8px;padding-top:6px;border-top:1px solid var(--gray-200);}
.pdf-totales .big{font-size:15px;color:var(--green-600);}
.pdf-foot{text-align:center;font-size:11px;color:var(--gray-500);margin-top:10px;border-top:1px solid var(--gray-200);padding-top:4px;}
#printArea table{width:100%;border-collapse:collapse;margin-top:8px;}
#printArea th,#printArea td{border:1px solid var(--gray-200);padding:4px;text-align:center;}
#printArea th{background:var(--green-100);}

/* ---------- Price Panel ---------- */
#pricePanel{
  position:fixed;right:16px;bottom:16px;width:220px;
  background:white;border:1px solid var(--gray-200);
  border-radius:var(--radius);box-shadow:var(--shadow);
  padding:8px;z-index:100;animation:fade .3s;
}
#pricePanel .pp-title{text-align:center;font-weight:600;color:var(--green);}
#pricePanel .pp-row{display:flex;justify-content:space-between;font-size:13px;border-bottom:1px solid #eee;padding:2px 0;}

/* ---------- Responsive ---------- */
@media(max-width:640px){
  .grid2,.grid3{grid-template-columns:1fr;}
  .tabs{overflow-x:auto;}
  .calc-table th,.calc-table td{font-size:12px;}
}

/* ---------- Impresión ---------- */
@media print{
  body *{visibility:hidden;}
  #printArea,#printArea *{visibility:visible;}
  #printArea{position:absolute;left:0;top:0;width:100%;padding:10px;}
}
