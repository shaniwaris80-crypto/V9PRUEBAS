/* =========================================================
   ARSLAN • FACTURAS — KIWI Edition (B/W ERP PRO)
   style.css (PARTE 2)
   - B/W limpio y profesional
   - GRID PRO sin scroll horizontal (PC)
   - móvil en tarjetas (sin perder campos)
   - tablas, listas, modales, toast, fab
========================================================= */

:root{
  --bg:#ffffff;
  --panel:#ffffff;
  --panel2:#fafafa;
  --ink:#0b0b0c;
  --muted:#6b6b6f;
  --line:#e6e6e9;
  --line2:#f0f0f2;
  --shadow:0 8px 28px rgba(0,0,0,.08);
  --shadow2:0 2px 10px rgba(0,0,0,.06);

  --btn:#111111;
  --btn2:#2a2a2a;
  --btnInk:#ffffff;

  --soft:#f2f2f4;
  --soft2:#ededf0;

  --danger:#b91c1c;
  --warn:#b45309;
  --ok:#0f766e;

  --radius:18px;
  --radius2:12px;

  --font:'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
}

/* Base */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family:var(--font);
  background:var(--bg);
  color:var(--ink);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
a{ color:inherit; text-decoration:none; }
button, input, select, textarea{
  font-family:var(--font);
  outline:none;
}
input, select, textarea{
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px 12px;
  font-size:14px;
  background:#fff;
  color:var(--ink);
}
textarea{ resize:vertical; min-height:120px; }
input:focus, select:focus, textarea:focus{
  border-color:#bfbfc4;
  box-shadow:0 0 0 4px rgba(0,0,0,.06);
}
label{
  display:block;
  font-size:12px;
  color:var(--muted);
  margin:10px 0 6px;
}
.muted{ color:var(--muted); }
.small{ font-size:12px; }

.divider{
  height:1px;
  background:var(--line2);
  margin:14px 0;
}

.split{
  width:1px; height:28px;
  background:var(--line);
  margin:0 8px;
  border-radius:99px;
}

/* Topbar */
.topbar{
  position:sticky;
  top:0;
  z-index:50;
  background:rgba(255,255,255,.92);
  backdrop-filter: blur(10px);
  border-bottom:1px solid var(--line2);
  padding:14px 16px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.brand{
  display:flex;
  align-items:center;
  gap:12px;
}
.brand .dot{
  width:14px; height:14px;
  border-radius:4px;
  background:#111;
}
.brandText .title{
  font-weight:800;
  letter-spacing:.2px;
  font-size:16px;
}
.brandText .subtitle{
  font-size:12px;
  color:var(--muted);
  margin-top:2px;
}
.topActions{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

/* Pills */
.pill{
  border:1px solid var(--line);
  background:#fff;
  padding:8px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  color:var(--ink);
}
.pill.soft{
  background:var(--soft);
  border-color:var(--soft2);
  color:var(--ink);
}

/* Buttons */
.btn{
  border:1px solid var(--line);
  background:#fff;
  color:var(--ink);
  padding:9px 12px;
  border-radius:999px;
  font-size:13px;
  font-weight:700;
  cursor:pointer;
  transition:.15s ease;
  box-shadow:none;
  white-space:nowrap;
}
.btn:hover{ background:var(--panel2); }
.btn:active{ transform:translateY(1px); }
.btn.primary{
  background:var(--btn);
  color:var(--btnInk);
  border-color:var(--btn);
}
.btn.primary:hover{ background:var(--btn2); border-color:var(--btn2); }
.btn.danger{
  border-color:rgba(185,28,28,.35);
  color:var(--danger);
  background:#fff;
}
.btn.danger:hover{ background:#fff5f5; }
.btn:disabled{
  opacity:.5;
  cursor:not-allowed;
}

/* Tabs */
.tabs{
  display:flex;
  gap:10px;
  padding:12px 16px;
  border-bottom:1px solid var(--line2);
  background:#fff;
  position:sticky;
  top:64px;
  z-index:40;
  overflow:auto;
}
.tab{
  border:1px solid var(--line);
  background:#fff;
  color:var(--ink);
  padding:10px 14px;
  border-radius:999px;
  font-weight:800;
  font-size:13px;
  cursor:pointer;
  transition:.15s ease;
}
.tab:hover{ background:var(--panel2); }
.tab.active{
  background:#111;
  color:#fff;
  border-color:#111;
}

/* Container / Cards */
.container{
  max-width:1320px;
  margin:18px auto 80px;
  padding:0 16px;
}
.card{
  background:var(--panel);
  border:1px solid var(--line2);
  border-radius:var(--radius);
  padding:16px;
  box-shadow:var(--shadow2);
}
.card + .card{ margin-top:14px; }

.card-title{
  font-weight:800;
  font-size:14px;
  margin-bottom:10px;
}
.card-title.mini{ font-size:13px; margin-bottom:8px; }
.card-title-row{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  margin-bottom:10px;
}
.hint{
  font-size:12px;
  color:var(--muted);
  margin-top:4px;
}
.hint.small{ font-size:11px; }

/* Layout blocks */
.invoice-head{
  display:grid;
  grid-template-columns: 1fr 0.9fr 1fr;
  gap:14px;
  margin-bottom:14px;
}
.bottom3{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap:14px;
  margin-top:14px;
}
.twoCols{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:14px;
}

/* Forms */
.form.compact label{ margin-top:8px; }
.form .row2, .row2{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
  margin-top:10px;
}
.row3{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap:10px;
  margin-top:10px;
}
.metaGrid{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:12px;
}
.label{
  font-size:12px;
  color:var(--muted);
  font-weight:700;
  margin-bottom:6px;
}
.toolbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-top:12px;
}
.toolbar .left, .toolbar .right{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
}

/* QR card */
.qrCard .qrWrap{
  display:flex;
  justify-content:center;
  align-items:center;
  padding:12px 0;
}
.qrBox{
  width:130px;
  height:130px;
  border:1px dashed var(--line);
  border-radius:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  background:#fff;
}

/* Chips */
.chips{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin:6px 0 6px;
}
.chip{
  border:1px solid var(--line);
  background:var(--soft);
  padding:6px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
  cursor:pointer;
}
.chip:hover{ background:var(--soft2); }

/* Tabpages */
.tabpage{ display:none; }
.tabpage.show{ display:block; }

/* GRID PRO TABLE */
.gridTable{
  border:1px solid var(--line2);
  border-radius:var(--radius);
  overflow:hidden; /* evita scroll horizontal visual */
  background:#fff;
}
.gridHead{
  display:grid;
  grid-template-columns:
    minmax(240px, 1.8fr)
    86px
    86px
    96px
    96px
    96px
    110px
    minmax(150px, 1.2fr)
    120px
    46px;
  gap:0;
  padding:10px 12px;
  background:var(--panel2);
  border-bottom:1px solid var(--line2);
  font-size:12px;
  font-weight:900;
  color:var(--muted);
}
.gridBody{
  display:flex;
  flex-direction:column;
}
.gridRow{
  display:grid;
  grid-template-columns:
    minmax(240px, 1.8fr)
    86px
    86px
    96px
    96px
    96px
    110px
    minmax(150px, 1.2fr)
    120px
    46px;
  padding:10px 12px;
  border-bottom:1px solid var(--line2);
  align-items:center;
  gap:10px;
}
.gridRow:nth-child(even){
  background:#fcfcfc;
}
.gridRow:last-child{ border-bottom:none; }

.gridRow input, .gridRow select{
  padding:10px 10px;
  border-radius:12px;
  font-size:13px;
}
.gridRow select{ padding-right:28px; }

.gridRow .amountBox{
  text-align:right;
  font-weight:900;
  font-size:14px;
}
.gridRow .btnX{
  width:40px;
  height:40px;
  border-radius:12px;
  border:1px solid rgba(185,28,28,.25);
  background:#fff;
  color:var(--danger);
  font-weight:900;
  cursor:pointer;
}
.gridRow .btnX:hover{ background:#fff5f5; }

.gridRow .miniTools{
  display:flex;
  gap:6px;
  justify-content:flex-end;
}
.iconBtn{
  width:40px;
  height:40px;
  border-radius:12px;
  border:1px solid var(--line);
  background:#fff;
  font-weight:900;
  cursor:pointer;
}
.iconBtn:hover{ background:var(--panel2); }

.gridRow .warn{
  border-color:rgba(180,83,9,.35) !important;
  background:#fff7ed;
}
.gridRow .bad{
  border-color:rgba(185,28,28,.35) !important;
  background:#fff5f5;
}
.gridRow .ok{
  border-color:rgba(15,118,110,.35) !important;
  background:#ecfdf5;
}

/* Totals */
.totals{
  border:1px solid var(--line2);
  border-radius:14px;
  padding:12px;
  background:#fff;
}
.totals .row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:13px;
  padding:6px 0;
  border-bottom:1px dashed var(--line2);
}
.totals .row:last-child{ border-bottom:none; }
.totals .row.big{
  font-size:16px;
  font-weight:900;
}
.totals strong{ font-weight:900; }

.checkline{
  display:flex;
  align-items:center;
  gap:10px;
  margin:8px 0;
  font-size:13px;
  color:var(--ink);
}
.checkline input{
  width:18px; height:18px;
  border-radius:6px;
}

/* Payments */
.payList{
  display:flex;
  flex-direction:column;
  gap:8px;
  margin-top:8px;
}
.payItem{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 12px;
  border:1px solid var(--line2);
  border-radius:14px;
  background:#fff;
}
.payItem .meta{
  font-size:12px;
  color:var(--muted);
}
.payItem .amt{
  font-weight:900;
}
.payItem .del{
  border:1px solid rgba(185,28,28,.25);
  background:#fff;
  color:var(--danger);
  border-radius:10px;
  padding:6px 10px;
  font-weight:900;
  cursor:pointer;
}

/* Lists */
.list{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-top:10px;
}
.listItem{
  border:1px solid var(--line2);
  background:#fff;
  border-radius:16px;
  padding:12px 12px;
  cursor:pointer;
  transition:.12s ease;
}
.listItem:hover{ background:var(--panel2); }
.listItem .top{
  display:flex;
  justify-content:space-between;
  gap:10px;
  align-items:center;
}
.listItem .t{
  font-weight:900;
}
.listItem .s{
  font-size:12px;
  color:var(--muted);
  margin-top:4px;
}
.badge{
  font-size:12px;
  font-weight:900;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid var(--line);
  background:var(--soft);
}
.badge.ok{ border-color:rgba(15,118,110,.35); background:#ecfdf5; color:var(--ok); }
.badge.warn{ border-color:rgba(180,83,9,.35); background:#fff7ed; color:var(--warn); }
.badge.bad{ border-color:rgba(185,28,28,.35); background:#fff5f5; color:var(--danger); }

/* Tables */
.tableWrap{
  overflow:auto;
  border:1px solid var(--line2);
  border-radius:var(--radius);
  background:#fff;
}
.table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  min-width:780px;
}
.table th, .table td{
  padding:12px 12px;
  border-bottom:1px solid var(--line2);
  font-size:13px;
}
.table th{
  position:sticky;
  top:0;
  background:var(--panel2);
  z-index:2;
  text-align:left;
  font-size:12px;
  color:var(--muted);
  font-weight:900;
}
.table td:last-child, .table th:last-child{ text-align:center; }
.table td.num{ text-align:right; font-weight:900; }
.table tr:hover td{ background:#fcfcfc; }

/* Filters */
.filters{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr 1fr;
  gap:10px;
  margin:12px 0;
  align-items:end;
}
.filters .row2{ margin-top:0; }

/* KPIs */
.kpis{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:10px;
  margin:10px 0 12px;
}
.kpi{
  border:1px solid var(--line2);
  background:#fff;
  border-radius:16px;
  padding:12px;
}
.kpi .k{
  font-size:12px;
  color:var(--muted);
  font-weight:900;
}
.kpi .v{
  font-size:18px;
  font-weight:900;
  margin-top:6px;
}

/* Preview */
.previewCard .invoicePreview{
  border:1px solid var(--line2);
  border-radius:var(--radius);
  padding:14px;
  background:#fff;
  overflow:auto;
}

/* Floating action button */
.fab{
  position:fixed;
  right:16px;
  bottom:18px;
  width:54px;
  height:54px;
  border-radius:18px;
  border:1px solid #111;
  background:#111;
  color:#fff;
  font-size:22px;
  font-weight:900;
  cursor:pointer;
  box-shadow:var(--shadow);
  z-index:60;
}
.fab:hover{ background:#2a2a2a; }

/* Modals */
.modal{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
  background:rgba(0,0,0,.35);
  z-index:80;
}
.modalCard{
  width:min(520px, 100%);
  background:#fff;
  border:1px solid var(--line2);
  border-radius:22px;
  padding:16px;
  box-shadow:var(--shadow);
}
.modalTitle{
  font-weight:900;
  font-size:14px;
  margin-bottom:8px;
}
.modalCard .toolbar{ margin-top:12px; }

/* Toast */
.toast{
  position:fixed;
  left:50%;
  bottom:20px;
  transform:translateX(-50%);
  background:#111;
  color:#fff;
  border-radius:999px;
  padding:10px 14px;
  font-weight:800;
  font-size:13px;
  box-shadow:var(--shadow);
  z-index:90;
}

/* Responsive */
@media (max-width: 1180px){
  .metaGrid{ grid-template-columns: repeat(2, 1fr); }
  .filters{ grid-template-columns: repeat(2, 1fr); }
  .kpis{ grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 980px){
  .tabs{ top:74px; }
  .invoice-head{
    grid-template-columns: 1fr;
  }
  .twoCols{ grid-template-columns: 1fr; }
  .bottom3{ grid-template-columns: 1fr; }
  .metaGrid{ grid-template-columns: 1fr; }

  /* GRID mobile: sin cabecera, filas tipo tarjeta */
  .gridHead{ display:none; }
  .gridRow{
    grid-template-columns: 1fr 46px;
    grid-template-areas:
      "prod del"
      "sub  del";
    align-items:stretch;
    gap:10px;
  }
  /* el app.js marcará clases; aquí soportamos estructura genérica */
  .gridRow .col-prod{ grid-area: prod; }
  .gridRow .col-del{ grid-area: del; display:flex; justify-content:flex-end; align-items:flex-start; }
  .gridRow .col-sub{
    grid-area: sub;
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:10px;
  }
  .gridRow .btnX{
    width:42px;
    height:42px;
    border-radius:14px;
  }

  .table{ min-width:720px; }
}

@media (max-width: 520px){
  .topbar{
    flex-direction:column;
    align-items:flex-start;
  }
  .topActions{
    width:100%;
    justify-content:flex-start;
  }
  .row3{ grid-template-columns: 1fr; }
  .filters{ grid-template-columns: 1fr; }
  .kpis{ grid-template-columns: 1fr; }
}
