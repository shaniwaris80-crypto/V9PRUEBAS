<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ARSLAN PRO V10.4 — KIWI Edition</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css" />

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>
  <!-- Splash -->
  <div id="splash">
    <img src="logo-kiwi.png" alt="Kiwi" class="logo-spin" />
    <h1>ARSLAN PRO V10.4 KIWI Edition</h1>
  </div>

  <!-- Encabezado -->
  <header>
    <h1>🥝 ARSLAN PRO <small>V10.4 KIWI Edition</small></h1>
    <nav class="tabs">
      <button class="tab active" data-tab="factura">Factura</button>
      <button class="tab" data-tab="clientes">Clientes</button>
      <button class="tab" data-tab="facturas">Facturas</button>
      <button class="tab" data-tab="resumen">Resumen</button>
      <button class="tab" data-tab="productos">Productos</button>
    </nav>
  </header>

  <!-- Panel FACTURA -->
  <section class="panel active" data-tab-panel="factura">
    <h2>Nueva Factura</h2>

    <div class="fila">
      <div>
        <h3>Proveedor</h3>
        <input id="provNombre" placeholder="Nombre proveedor" value="Mohammad Arslan Waris" />
        <input id="provNif" placeholder="NIF" value="X6389988J" />
        <input id="provDir" placeholder="Dirección" value="C/ San Pablo 17, Burgos" />
        <input id="provTel" placeholder="Teléfono" value="631 667 893" />
        <input id="provEmail" placeholder="Email" value="shaniwaris80@gmail.com" />
      </div>

      <div>
        <h3>Cliente</h3>
        <select id="selCliente"></select>
        <input id="cliNombre" placeholder="Nombre cliente" />
        <input id="cliNif" placeholder="NIF/CIF" />
        <input id="cliDir" placeholder="Dirección" />
        <input id="cliTel" placeholder="Teléfono" />
        <input id="cliEmail" placeholder="Email" />
        <button id="btnNuevoCliente" class="btn">📇 Buscar cliente</button>
      </div>
    </div>

    <hr />

    <div id="lineas"></div>
    <div class="row-inline">
      <button id="btnAddLinea" class="btn">➕ Añadir línea</button>
      <button id="btnVaciarLineas" class="btn ghost">🗑️ Vaciar</button>
    </div>

    <div id="totales">
      <label><input type="checkbox" id="chkTransporte" checked /> Transporte +10 %</label>
      <label><input type="checkbox" id="chkIvaIncluido" checked /> IVA 4 %</label>
      <div class="grid4">
        <div>Subtotal <strong id="subtotal">0 €</strong></div>
        <div>Transporte <strong id="transp">0 €</strong></div>
        <div>IVA <strong id="iva">0 €</strong></div>
        <div>Total <strong id="total">0 €</strong></div>
      </div>
      <div class="grid3">
        <div>Pagado <input id="pagado" type="number" step="0.01" /></div>
        <div>Pendiente <strong id="pendiente">0 €</strong></div>
        <div>Estado <select id="estado">
          <option value="pendiente">Pendiente</option>
          <option value="parcial">Parcial</option>
          <option value="pagado">Pagado</option>
        </select></div>
      </div>
      <div>
        Método de pago <select id="metodoPago">
          <option>Efectivo</option><option>Tarjeta</option><option>Transferencia</option>
        </select>
      </div>
      <textarea id="observaciones" placeholder="Observaciones"></textarea>
      <div class="actions">
        <button id="btnGuardar" class="btn">💾 Guardar</button>
        <button id="btnImprimir" class="btn ghost">🖨️ PDF</button>
        <button id="btnNueva" class="btn ghost">🧾 Nueva</button>
      </div>
    </div>

    <!-- Vista para PDF -->
    <div id="printArea">
      <div class="print-header">
        <div id="p-prov"></div>
        <div id="p-cli"></div>
      </div>
      <div class="print-info">
        <div>Número factura: <strong id="p-num"></strong></div>
        <div>Fecha: <strong id="p-fecha"></strong></div>
      </div>
      <table id="p-tabla">
        <thead>
          <tr>
            <th>Producto</th><th>Modo</th><th>Cant.</th><th>Neto kg</th>
            <th>Precio</th><th>Origen</th><th>Importe</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="print-totales">
        <p>Subtotal: <span id="p-sub"></span></p>
        <p>Transporte: <span id="p-tra"></span></p>
        <p>IVA 4 %: <span id="p-iva"></span></p>
        <p><strong>Total: <span id="p-tot"></span></strong></p>
        <p>Estado: <span id="p-estado"></span> · Método: <span id="p-metodo"></span></p>
        <p>Notas: <span id="p-obs"></span></p>
      </div>
    </div>
  </section>

  <!-- Panel CLIENTES -->
  <section class="panel" data-tab-panel="clientes">
    <h2>Clientes</h2>
    <input id="buscarCliente" placeholder="Buscar cliente..." />
    <div id="listaClientes" class="listado"></div>
    <div class="row-inline">
      <button id="btnAddCliente" class="btn">➕ Añadir</button>
      <button id="btnExportClientes" class="btn ghost">⬇️ Exportar</button>
      <button id="btnImportClientes" class="btn ghost">⬆️ Importar</button>
    </div>
  </section>

  <!-- Panel FACTURAS -->
  <section class="panel" data-tab-panel="facturas">
    <h2>Historial de facturas</h2>
    <div class="row-inline">
      <input id="buscaCliente" placeholder="Buscar por cliente..." />
      <select id="filtroEstado">
        <option value="todas">Todas</option>
        <option value="pendiente">Pendientes</option>
        <option value="parcial">Parciales</option>
        <option value="pagado">Pagadas</option>
      </select>
    </div>
    <div id="listaFacturas" class="listado"></div>
    <div class="row-inline">
      <button id="btnExportFacturas" class="btn ghost">⬇️ Exportar</button>
      <button id="btnImportFacturas" class="btn ghost">⬆️ Importar</button>
    </div>
  </section>

  <!-- Panel RESUMEN -->
  <section class="panel" data-tab-panel="resumen">
    <h2>Resumen de ventas y deudas</h2>
    <div class="grid4">
      <div>Hoy: <strong id="rHoy">0 €</strong></div>
      <div>Semana: <strong id="rSemana">0 €</strong></div>
      <div>Mes: <strong id="rMes">0 €</strong></div>
      <div>Total: <strong id="rTotal">0 €</strong></div>
    </div>
    <h3>Deudas pendientes</h3>
    <p>Total global: <strong id="resGlobal">0 €</strong></p>
    <div id="resPorCliente" class="listado"></div>
    <div class="row-inline">
      <button id="btnResetCliente" class="btn">Reset cliente</button>
      <button id="btnResetGlobal" class="btn ghost">Reset global</button>
      <button id="btnBackup" class="btn">💾 Backup</button>
      <button id="btnRestore" class="btn ghost">♻️ Restaurar</button>
    </div>
    <canvas id="chartDiario" height="150"></canvas>
    <canvas id="chartMensual" height="150"></canvas>
  </section>

  <!-- Panel PRODUCTOS -->
  <section class="panel" data-tab-panel="productos">
    <h2>Productos</h2>
    <div id="listaProductos" class="listado"></div>
    <div class="row-inline">
      <button id="btnAddProducto" class="btn">➕ Añadir</button>
      <button id="btnExportProductos" class="btn ghost">⬇️ Exportar</button>
      <button id="btnImportProductos" class="btn ghost">⬆️ Importar</button>
    </div>
  </section>

  <script src="app.js"></script>
</body>
</html>
